<section class="container py-5">
	<!-- HERO -->
	<div class="row align-items-center mb-5">
		<div class="col-lg-7">
			<h1 class="display-5 fw-bold">Repuestos diésel de alto rendimiento</h1>
			<p class="lead text-muted">Inyección, turbos y mantenimiento con envío a todo el país.</p>

			<div class="input-group mb-3 mt-4">
				<input class="form-control form-control-lg" placeholder="Buscá por producto, marca o código" [(ngModel)]="q">
				<button class="btn btn-primary btn-lg" type="button">Buscar</button>
			</div>

			<div class="d-flex gap-2 flex-wrap">
				<button class="btn btn-outline-secondary" [class.active]="onlyOffers" (click)="toggleOffers()">Solo ofertas</button>
				<button class="btn btn-outline-secondary" [class.active]="activeCategory==='all'" (click)="setCategory('all')">Todos</button>
				@for (c of categories; track c.id) {
					<button class="btn btn-outline-secondary" [class.active]="activeCategory===c.id" (click)="setCategory(c.id)">{{ c.name }}</button>
				}
			</div>
		</div>

		<div class="col-lg-5 d-none d-lg-block">
			<img src="assets/img/hero-turbo.jpg" class="img-fluid rounded" alt="Turbo">
		</div>
	</div>

	<!-- NOVEDADES -->
	<div class="mb-5">
		<div class="d-flex align-items-center justify-content-between mb-3">
			<h2 class="h4 mb-0">Novedades</h2>
			<a routerLink="/novedades" class="small">Ver todo</a>
		</div>

		<div class="row g-3">
			@for (p of products; track p.id) {
				@if (p.badge === 'NUEVO') {
					<div class="col-6 col-md-4 col-lg-3">
						<div class="card h-100">
							<img [src]="p.img" class="card-img-top" [alt]="p.name">
							<div class="card-body d-flex flex-column">
								<h5 class="card-title">{{ p.name }}</h5>
								<p class="mt-auto d-flex align-items-center justify-content-between">
									<strong class="text-primary">{{ p.price | currency:'ARS':'symbol-narrow':'1.0-0':'es-AR' }}</strong>
									<button class="btn btn-sm btn-outline-primary" (click)="addToCart(p)">Agregar</button>
								</p>
							</div>
						</div>
					</div>
				}
			}
					@if (!hasNovedades()) {
				<div class="col-12"><div class="text-muted">No hay novedades por el momento.</div></div>
			}
		</div>
	</div>

	<!-- DESTACADOS -->
	<div class="mb-5">
		<div class="d-flex align-items-center justify-content-between mb-3">
			<h2 class="h4 mb-0">Destacados</h2>
			<a routerLink="/productos" class="small">Ver todo</a>
		</div>

		<div class="row g-3">
			@for (p of filteredProducts; track p.id) {
				<div class="col-6 col-md-4 col-lg-3">
					<div class="card h-100">
						<div class="position-relative">
							<img [src]="p.img" class="card-img-top" [alt]="p.name">
							@if (p.badge) { <span class="badge bg-warning text-dark position-absolute m-2">{{ p.badge }}</span> }
						</div>
						<div class="card-body d-flex flex-column">
							<h5 class="card-title">{{ p.name }}</h5>
							<div class="mt-auto d-flex align-items-center justify-content-between">
								<div class="text-primary fw-bold">{{ p.price | currency:'ARS':'symbol-narrow':'1.0-0':'es-AR' }}</div>
								<button class="btn btn-sm btn-primary" (click)="addToCart(p)">Agregar</button>
							</div>
						</div>
					</div>
				</div>
			}
			@if (!filteredProducts.length) {
				<div class="col-12"><div class="text-muted">No hay productos para la búsqueda/filtrado.</div></div>
			}
		</div>
	</div>

	<!-- CATEGORÍAS -->
	<div class="mb-5">
		<h2 class="h4">Categorías</h2>
		<div class="d-flex gap-3 flex-wrap mt-3">
			@for (c of categories; track c.id) {
				<button class="btn btn-outline-secondary" (click)="setCategory(c.id)">{{ c.name }}</button>
			}
		</div>
	</div>

	<!-- CTA -->
	<div class="py-5 text-center bg-light rounded-3">
		<h3>¿Necesitás asesoramiento técnico?</h3>
		<p class="text-muted">Contactanos y te ayudamos a encontrar la pieza correcta.</p>
		<a routerLink="/contacto" class="btn btn-primary">Contactar ahora</a>
	</div>
</section>
